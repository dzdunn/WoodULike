@model WoodULike.Models.WoodProject

@{
    ViewBag.Title = "Details";
}

<h2>@Html.DisplayFor(model => model.ProjectTitle)</h2>

<div class="row">
    <div class="col-md-8">
        <ul class="list-group">
            <li class="list-group-item">
               
               <div id="myCarousel" class="carousel slide" data-ride="carousel">
                   @*<ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active">

        </li>
        @*<li data-target="#myCarousel" data-slide-to="1">

        </li>
        <li data-target="#myCarousel" data-slide-to="2">

        </li>
    </ol>*@
                   <div class="carousel-inner">
                      
                    

                           @foreach (var image in Model.ImageFiles)
                           {

                            

                           <div class="item">
                               <img src="@image.getCorrectUrl(image.Directory)" id="mainImage"   />
                           </div>
                                 
                               }
                           
                       @*<div class="item active">
                           <img src="/@Model.ImageFiles.ElementAt(0).Directory.Replace('\\', '/')" />
                       </div>
                       <div class="item">
                           <img src="/@Model.ImageFiles.ElementAt(1).Directory.Replace('\\', '/')" />
                       </div>
                       <div class="item">
                           <img src="/@Model.ImageFiles.ElementAt(2).Directory.Replace('\\', '/')" />
                       </div>*@
                       
                   </div>
                   <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                       <span class="glyphicon glyphicon-chevron-left"></span>
                       <span class="sr-only">Previous</span>
                   </a>
                   <a class="right carousel-control" href="#myCarousel" data-slide="next">
                       <span class="glyphicon glyphicon-chevron-right"></span>
                       <span class="sr-only">Next</span>
                   </a>

               </div>
                <div class="imageContainer">
                    @foreach (var image in Model.ImageFiles)
                    {

                        <img class="galleryIcon img-thumbnail" src="@image.getCorrectUrl(image.Directory)"  />

                    }
                </div>








                @*<div class="imageContainer">
                    <img src="/@Model.ImageFiles.ElementAt(0).Directory.Replace('\\', '/')" id="detailGallery" />
                </div>*@
               
            </li>
            
            @*<li class="list-group-item" id="thumbnailGallery">
                <div class="imageContainer">
                    @foreach (var image in Model.ImageFiles)
                    {
                        <img src="@image.getCorrectUrl(image.Directory)" class="galleryIcon img-thumbnail" />
                    }
                </div>

            </li>*@
            
         
            
            <li class="list-group-item list-group-item-success detailHeader">
                @Html.DisplayNameFor(model => model.Description)
            </li>
            <li class="list-group-item">
                @Html.DisplayFor(model => model.Description)
            </li>
            <br />
            <li class="list-group-item list-group-item-success detailHeader">
                @Html.DisplayNameFor(model => model.ProjectType)
            </li>
            <li class="list-group-item">
                @Html.DisplayFor(model => model.ProjectType)
            </li>
           
        </ul>
        
    </div>
    <div class="col-md-4">
        <ul class="list-group">
            <li class="list-group-item">
                <p>LINKS BOX</p>
            </li>
        </ul>
    </div>

    <hr />
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>

<script>
    $(document).ready(function () {

        var currentActiveImage = $("div .item:first");
        currentActiveImage.removeClass("item").addClass("item-active");
      
        var thumbnailImages = $(".galleryIcon");

        thumbnailImages.on('click', function () {

            
            currentActiveImage = $(".item-active");
            currentActiveSRC = currentActiveImage.closest('img').attr('src');
            clickedSRC = $(this).attr('src');

            if (currentActiveImage != clickedSRC) {

                //thumbnailImages.css("background-color", "");
                //$(this).css("background-color", "red");

                var targetImage = $(".item").find("[src='" + $(this).attr('src') + "']");

                currentActiveImage.removeClass("item-active").addClass("item");

                targetImage.parent("div").removeClass("item").addClass("item-active");
            }
        })


        var rightChevron = $(".right");
        rightChevron.on('click', function () {
            currentActiveImage = $(".item-active");
            if (currentActiveImage.next().length > 0) {
                currentActiveImage.next().removeClass("item");
                currentActiveImage.removeClass("item-active");
                currentActiveImage.next().addClass("item-active");
                currentActiveImage.addClass("item")
                currentActiveImage = currentActiveImage.next();
            }

            //var targetThumbnail = thumbnailImages.find("[src='" + $(this).attr('src') + "']")
            //targetThumbnail.css("border-color", "red");
        })

        var leftChevron = $(".left");
        leftChevron.on('click', function () {
            currentActiveImage = $(".item-active");
            if (currentActiveImage.prev().length > 0) {
                currentActiveImage.prev().addClass("item-active");
                currentActiveImage.prev().removeClass("item");
                currentActiveImage.removeClass("item-active");
                currentActiveImage.addClass("item")
                currentActiveImage = currentActiveImage.prev();
            }
            //var targetThumbnail = thumbnailImages.find("[src='" + $(this).attr('src') + "']")
            //targetThumbnail.css("border-color", "red");
        })

        //$(".right").on("click", function () {
        //    //$(".item-active").removeClass("item-active").addClass("item").next().removeClass("item").addClass("item-active");

        //    activeImage.removeClass("item-active").addClass("item");
        //    activeImage = activeImage.next();
        //    activeImage.removeClass("item").addClass("item-active");
        //}

        //$(".glyphicon").on('click', function () {
        //    $("#thumbnailGallery").animate({ left: '+=250px' }); })

        //$("#item:first").addClass("item-active");

       // $(".carousel-inner").find("div:first").removeClass("item").addClass("item-active");

        //$(".glyphicon glyphicon-chevron-right sr-only").click(function () {

        //    alert("Works");
            

            //on click of right chevron --> change attribute to currentIndex+1
            //$(".item-active").removeClass("item-active").addClass("item").next(".item").removeClass("item").addClass("item-active");

        //})

        //$(".right").click(function () {
        //    $(".carousel-inner").children(".item:first").removeClass("item-active").next().addClass("item-active");
        //})
    })        
    
</script>


